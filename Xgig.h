//! \file Xgig.h
//! \brief Declares the interfaces to the Xgig Analyzer
#pragma once
#ifndef _XGIG_H_INCLUDED_
#define _XGIG_H_INCLUDED_
#include <list>
#include <vector>
#include "EventType.h"
#pragma pack(push, 1 )


#define GE_10G_SPEED (10.31250)
#define FC_10G_SPEED (10.51875)
#define FC_16G_SPEED (14.025)
#define FC_32G_SPEED (2*FC_16G_SPEED)
#define FC_128G_SPEED (8*FC_16G_SPEED)
#define GE_25G_SPEED (GE_10G_SPEED*2.5)
#define GE_50G_SPEED  (GE_10G_SPEED*5)
#define GE_100G_SPEED (GE_10G_SPEED*10)


static const unsigned int HCEF_PCIE_CLKREQ_CAPTURE_ENABLE = 1;
static const unsigned int HCEF_PCIE_PERST_CAPTURE_ENABLE = 2;
static const unsigned int HCEF_PCIE_PEWAKE_CAPTURE_ENABLE = 4;
static const unsigned int HCEF_G24_SPL_CAPTURE_CAPABLE = 8;
//-----------------------------------------------------------------------------
// HRESULTS Definitions
//-----------------------------------------------------------------------------
typedef enum HRESULTS
#if (_MSC_VER >= 1400)
#pragma warning(disable:4480)
: unsigned int                  // tell the compiler what type to use to hold these enum values
#endif //#ifdef VS2005 or better
{
      // The error bit in a HRESULTS
      TD_HR_ERROR_FLAG                                                     = 0x80000000,                                    /**< All Non Success code are ORed with this                                                                                                                                                                         */       //DD All Non Success code are "OR'ed" with this                                                                                                                                                                                                                                                                                    
      SUCCEEDED                                                            = 0,                                             /**< Successful operation.                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      CFILE_GENERIC                                                        = (TD_HR_ERROR_FLAG|0x1),                        /**< CFILE_GENERIC                                                                                                                                                                                                   */       //DD 1-15 CFile Errors                                                                                                                                                                                                                                                                                     
      CFILE_FILE_NOT_FOUND                                                 = (TD_HR_ERROR_FLAG|0x2),                        /**< CFILE_FILE_NOT_FOUND %X. At least one file is missing: %s                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      CFILE_BAD_PATH                                                       = (TD_HR_ERROR_FLAG|0x3),                        /**< CFILE_BAD_PATH                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      CFILE_TOO_MANY_OPEN_FILES                                            = (TD_HR_ERROR_FLAG|0x4),                        /**< CFILE_TOO_MANY_OPEN_FILES                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      CFILE_ACCESS_DENIED                                                  = (TD_HR_ERROR_FLAG|0x5),                        /**< CFILE_ACCESS_DENIED                                                                                                                                                                                             */ 
      CFILE_INVALID_FILE                                                   = (TD_HR_ERROR_FLAG|0x6),                        /**< Open Failed. Domain not found or invalid file specified.                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      CFILE_REMOVE_CURRENT_DIR                                             = (TD_HR_ERROR_FLAG|0x7),                        /**< CFILE_REMOVE_CURRENT_DIR                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      CFILE_DIRECTORY_FULL                                                 = (TD_HR_ERROR_FLAG|0x8),                        /**< CFILE_DIRECTORY_FULL                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      CFILE_BAD_SEEK                                                       = (TD_HR_ERROR_FLAG|0x9),                        /**< CFILE_BAD_SEEK                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      CFILE_HARD_IO                                                        = (TD_HR_ERROR_FLAG|0xA),                        /**< CFILE_HARD_IO                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      CFILE_SHARING_VIOLATION                                              = (TD_HR_ERROR_FLAG|0xB),                        /**< Sharing Violation: Cannot overwrite a file that is locked.                                                                                                                                                      */                                                                                                                                                                                                                                                                                                                  
      CFILE_LOCK_VIOLATION                                                 = (TD_HR_ERROR_FLAG|0xC),                        /**< CFILE_LOCK_VIOLATION                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      CFILE_DISK_FULL                                                      = (TD_HR_ERROR_FLAG|0xD),                        /**< CFILE_DISK_FULL                                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      CFILE_END_OF_FILE                                                    = (TD_HR_ERROR_FLAG|0xE),                        /**< CFILE_END_OF_FILE                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      CFILE_UNDEFINED_ERROR                                                = (TD_HR_ERROR_FLAG|0xF),                        /**< CFILE_UNDEFINED_ERROR                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      // Wolfden Error code mappings                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
      TD_OPEN_FAIL_LASTCAPTUREADDR                                         = (TD_HR_ERROR_FLAG|0x10),                       /**< Open Failed. Corrupt Domain.                                                                                                                                                                                    */       //DD Error Open Port due: Device Error, Fpga Not configure, Mem Not configure                                                                                                                                                                                                                              
      TD_OPEN_FAIL_INVALIDPARAMS                                           = (TD_HR_ERROR_FLAG|0x11),                       /**< Open Failed. Corrupt Domain.                                                                                                                                                                                    */       //DD Last Capture Address is invalid                                                                                                                                                                                                                                                                       
      TD_OPEN_FAIL_OPENFILE                                                = (TD_HR_ERROR_FLAG|0x12),                       /**< TD_OPEN_FAIL_OPENFILE                                                                                                                                                                                           */       //DD Invalid Parameters                                                                                                                                                                                                                                                                                    
      TD_OPEN_FAIL_HARDWARE                                                = (TD_HR_ERROR_FLAG|0x13),                       /**< TD_OPEN_FAIL_HARDWARE                                                                                                                                                                                           */       //DD Error Open file (Simulation)                                                                                                                                                                                                                                                                          
      TD_OPEN_FAIL_COULD_NOT_FIND_DOMAIN                                   = (TD_HR_ERROR_FLAG|0x14),                       /**< Open Failed. Domain not found.                                                                                                                                                                                  */       //DD Resource Browser didn't find domain                                                                                                                                                                                                                                                                   
      TD_OPEN_FAIL_CAPTURE_IN_PROGRESS                                     = (TD_HR_ERROR_FLAG|0x15),                       /**< Open Failed. Capture was in progress.                                                                                                                                                                           */       //DD Capture In Progress TD_OPEN_FAIL_NO_CAPTURE_FOUND                                                                                                                                                                                                                                                     
      TD_OPEN_FAIL_NO_CAPTURE_FOUND                                        = (TD_HR_ERROR_FLAG|0x16),                       /**< Open Failed. No capture found.                                                                                                                                                                                  */       //DD No capture found                                                                                                                                                                                                                                                                                      
      TD_OPEN_FAIL_VERSION_MISMATCH                                        = (TD_HR_ERROR_FLAG|0x17),                       /**< Open Failed. Client/Server Incompatability.                                                                                                                                                                     */       //DD Connection refused - version                                                                                                                                                                                                                                                                          
      TD_OPEN_FAIL_VERSION_MISMATCH_UPGRADE_SERVER                         = (TD_HR_ERROR_FLAG|0x19),                       /**< Open Failed. Failed to Locate Server.                                                                                                                                                                           */       //DD Connection refused - version                                                                                                                                                                                                                                                                          
      TD_OPEN_FAIL_VERSION_MISMATCH_UPGRADE_CLIENT                         = (TD_HR_ERROR_FLAG|0x1A),                       /**< Open Failed. Failed to Locate Server.                                                                                                                                                                           */       //DD Connection refused - version                                                                                                                                                                                                                                                                          
      TD_OPEN_FAILED_TO_GET_SERVER_TCPPORT                                 = (TD_HR_ERROR_FLAG|0x18),                       /**< Open Failed. Failed to Locate Server.                                                                                                                                                                           */       //DD could not find out server port - perhaps the server failed to launch?                                                                                                                                                                                                                                 
      TD_OPEN_FAILED_NO_MEMORY                                             = (TD_HR_ERROR_FLAG|0x1B),                       /**< Failed to connect to the remote chassis because it is running low in memory.\n                                                                                                                                  */       //DD Low memory on server                                                                                                                                                                                                                                                                                  
      TD_OPEN_FAILED_TOO_MANY_CLIENTS                                      = (TD_HR_ERROR_FLAG|0x1C),                       /**< The Server has reached its capacity. Please try closing other views of the domain and try again.                                                                                                                */       //DD Too many clients already.                                                                                                                                                                                                                                                                             
      TD_OPEN_FAILED_UNKNOWN_ERROR                                         = (TD_HR_ERROR_FLAG|0x1D),                       /**< Open Failed. Unknown Error.                                                                                                                                                                                     */       //DD unknown                                                                                                                                                                                                                                                                                               
      TD_OPEN_FAILED_NO_RESOURCE_BROWSER                                   = (TD_HR_ERROR_FLAG|0x1E),                       /**< Open Failed. No Resource Browser.                                                                                                                                                                               */       //DD couldn't get a pointer to the resource browser                                                                                                                                                                                                                                                        
      TD_OPEN_FAILED_DOMAIN_NOT_FOUND                                      = (TD_HR_ERROR_FLAG|0x1F),                       /**< Open Failed. Domain not found by discovery.                                                                                                                                                                     */       //DD resource browser could identify the domain.                                                                                                                                                                                                                                                           
      TD_OPEN_FAILED_CANT_FIND_SERVER                                      = (TD_HR_ERROR_FLAG|0x20),                       /**< Open Failed. Can't local Server's IP Address.                                                                                                                                                                   */       //DD didn't get any ip addresses for the capture.                                                                                                                                                                                                                                                          
      TD_OPEN_FAILED_SERVER_TIMEOUT                                        = (TD_HR_ERROR_FLAG|0x21),                       /**< Open Failed. Timed Out on Server's Response.                                                                                                                                                                    */       //DD blocking/sync call timeout                                                                                                                                                                                                                                                                            
      TD_OPEN_FAILED_NO_CHANNELS_SELECTED                                  = (TD_HR_ERROR_FLAG|0x22),                       /**< TD_OPEN_FAILED_NO_CHANNELS_SELECTED                                                                                                                                                                             */       //DD no channels                                                                                                                                                                                                                                                                                           
      TD_OPEN_FAILED_INVALID_CHANNEL_SELECTED                              = (TD_HR_ERROR_FLAG|0x23),                       /**< TD_OPEN_FAILED_INVALID_CHANNEL_SELECTED                                                                                                                                                                         */       //DD one selected channel appeared to look dodgy                                                                                                                                                                                                                                                           
      TD_OPEN_FAIL_DUSTED_FOR_SEGMENT_RESIZE                               = (TD_HR_ERROR_FLAG|0x24),                       /**< Open Failed. Captured segment was overwritten.                                                                                                                                                                  */       //DD Resizing segments will eliminate captures                                                                                                                                                                                                                                                             
      TD_OPEN_FAILED_SERVER_TOO_BUSY                                       = (TD_HR_ERROR_FLAG|0x25),                       /**< Open Failed. Server temporarily too Busy.                                                                                                                                                                       */       //DD Resizing segments will eliminate captures                                                                                                                                                                                                                                                             
      TD_OPEN_FAILED_SERVER_TOO_BUSY2                                      = (TD_HR_ERROR_FLAG|0x26),                       /**< Open Failed. Server temporarily too Busy.                                                                                                                                                                       */       //DD Resizing segments will eliminate captures                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_OPEN_FAILED_UNSUPPORTED_FORMAT                                    = (TD_HR_ERROR_FLAG|0x40),                       /**< Open Failed. Unsupported Format.                                                                                                                                                                                */       //DD can't open old buggy bitfile versions                                                                                                                                                                                                                                                                 
      TD_OPEN_FAILED_MISMATCHED_INTERNAL_TRACE                             = (TD_HR_ERROR_FLAG|0x41),                       /**< Open Failed. Mismatched Internal Trace. Try trace(Major=%d Minor=%d) from the trace depository or re-generate with this build.                                                                                  */       //DD Crystal: force user to get the latest converted trace                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_OPEN_FAILED_HEADER_ERROR                                          = (TD_HR_ERROR_FLAG|0x50),                       /**< Open Failed. Error Reading Header.                                                                                                                                                                              */       //DD Error reading the header                                                                                                                                                                                                                                                                              
      TD_OPEN_FAILED_SET_REGIONS                                           = (TD_HR_ERROR_FLAG|0x51),                       /**< Open Failed. Error Setting Regions.                                                                                                                                                                             */       //DD Error setting regions. Typically this means the 2K timestamps are hosed.                                                                                                                                                                                                                              
      TD_OPEN_FAILED_NO_ALIGNED_TIMESTAMP                                  = (TD_HR_ERROR_FLAG|0x52),                       /**< Open Failed. Error locating 1st Timestamp.                                                                                                                                                                      */       //DD no 1MB timestamp                                                                                                                                                                                                                                                                                      
      TD_OPEN_FAILED_READ_TIMESTAMP_MAP_FAILED                             = (TD_HR_ERROR_FLAG|0x53),                       /**< Open Failed. Error reading Timestamp table.                                                                                                                                                                     */       //DD error reading timestamp table                                                                                                                                                                                                                                                                         
      TD_OPEN_FAILED_GETINISEG                                             = (TD_HR_ERROR_FLAG|0x54),                       /**< Open Failed. Error Getting Initial Segment.                                                                                                                                                                     */       //DD Generic GetInitialSegment                                                                                                                                                                                                                                                                             
      TD_OPEN_FAILED_ZERO_SIZED_CAPTURE                                    = (TD_HR_ERROR_FLAG|0x55),                       /**< Open Failed. Error: Zero Sized capture.                                                                                                                                                                         */       //DD Zero sized capture                                                                                                                                                                                                                                                                                    
      TD_OPEN_FAILED_START_THREAD_ERROR                                    = (TD_HR_ERROR_FLAG|0x56),                       /**< Open Failed. Error Starting Thread.                                                                                                                                                                             */       //DD Start thread error                                                                                                                                                                                                                                                                                    
      TD_OPEN_FAILED_OPEN_ABORTED                                          = (TD_HR_ERROR_FLAG|0x57),                       /**< Open Failed. Open was Aborted.                                                                                                                                                                                  */       //DD Open aborted error                                                                                                                                                                                                                                                                                    
      TD_OPEN_FAILED_LAST_TIME_NEGATIVE                                    = (TD_HR_ERROR_FLAG|0x58),                       /**< Open Failed. Error: Last Timestamp is Negative.                                                                                                                                                                 */       //DD Last TimeStamp was negative                                                                                                                                                                                                                                                                           
      TD_OPEN_EXCEPTION_OCCURRED_DURING_OPEN                               = (TD_HR_ERROR_FLAG|0x59),                       /**< Open Failed. Internal Exception During Open.                                                                                                                                                                    */       //DD Some sort of exception                                                                                                                                                                                                                                                                                
      TD_OPEN_FAILED_INVALID_HEADER                                        = (TD_HR_ERROR_FLAG|0x5A),                       /**< Open Failed. Error: Invalid Header.                                                                                                                                                                             */       //DD Saw a bad value in the header.                                                                                                                                                                                                                                                                        
      TD_OPEN_FAILED_HEADER_VERSION_UPGRADE                                = (TD_HR_ERROR_FLAG|0x5B),                       /**< Incompatible File Version. Try upgrading to the latest release of the Xgig Viewer from http://snt-sw.jdsu.com                                                                                                   */       //DD Capture is from an incompatible future version                                                                                                                                                                                                                                                        
      TD_OPEN_FAILED_BAD_HEADER                                            = (TD_HR_ERROR_FLAG|0x5C),                       /**< Open Failed. Error: Bad Header.                                                                                                                                                                                 */       //DD Bad Header                                                                                                                                                                                                                                                                                            
      TD_OPEN_FAILED_CORRUPTED_HEADER                                      = (TD_HR_ERROR_FLAG|0x5D),                       /**< Open Failed. Error: Corrupted Header.                                                                                                                                                                           */       //DD Didn't see correct/valid bytes in the header                                                                                                                                                                                                                                                          
      TD_OPEN_FAILED_INVALID_SEGMENT                                       = (TD_HR_ERROR_FLAG | 0x5E),                     /**< Open Failed. Error: Invalid segment number.                                                                                                                                                                     */       // Invalid segment number specified                                                                                                                                                                                                                                                                        
      TD_OPEN_FAILED_CAPTURE_NOT_READY                                     = (TD_HR_ERROR_FLAG | 0x5F),                     /**< Open Failed. The capture is not ready - either a capture is in progress in one of the segments in the domain, or the segment is in post-capture processing.                                                     */       // Capture not ready for opening (e.g. trigger not processed)                                                                                                                                                                                                                                              
      TD_OPEN_FAILED_GTX_CAPTURE_TOO_LONG_ERROR                            = (TD_HR_ERROR_FLAG | 0x60),                     /**< Open Failed. The capture's time range wrapped the GTX tick counter and therefore will not display correctly.                                                                                                    */       // GTX had a bug where it could wrap its 48 bit tick counter (testing 1st timestamp).                                                                                                                                                                                                                      
      TD_OPEN_FAILED_GTX_CAPTURE_TOO_LONG_ERROR2                           = (TD_HR_ERROR_FLAG | 0x61),                     /**< Open Failed. The capture's time range exceeded the GTX tick counter duration and therefore will not display correctly.                                                                                          */       // GTX had a bug where it could wrap its 48 bit tick counter (testing last 2K timestamp).                                                                                                                                                                                                                  
      TD_OPEN_FAILED_CORRUPTED_SEGINFO                                     = (TD_HR_ERROR_FLAG | 0x62),                     /**<  TCS had a bug where it wrote wrong seginfo size in header for 12G SAS traces.                                                                                                                                  */       // TCS had a bug where it wrote wrong seginfo size in header for 12G SAS traces.                                                                                                                                                                                                                           
      TD_OPEN_FAILED_INVALID_CAPTURE_FORMAT                                = (TD_HR_ERROR_FLAG | 0x63),                     /**< Open Failed. Invalid Viavi Solutions Inc. Capture Format.                                                                                                                                                       */       // TRC file looks invalid                                                                                                                                                                                                                                                                                  
      TD_OPEN_FAILED_RETIRED_FORMAT                                        = (TD_HR_ERROR_FLAG | 0x64),                     /**< Open Failed. This trace file format is no longer supported.                                                                                                                                                     */       // TRC file no longer supported                                                                                                                                                                                                                                                                            
      //     Called a remote type function on something that is not remote                                                  //                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      TD_DOMAIN_IS_LOCAL                                                   = (TD_HR_ERROR_FLAG|0x80),                       /**< TD_DOMAIN_IS_LOCAL                                                                                                                                                                                              */       //DD Called a remote type function on something that is not remote                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_OLD_FILE_INCOMPATIBLE_HEADER                                      = (TD_HR_ERROR_FLAG|0x90),                       /**< Header is old, does not support Link Info                                                                                                                                                                       */       //DD Header is old, does not support Link Info                                                                                                                                                                                                                                                             
      TD_NEW_FILE_INCOMPATIBLE_HEADER                                      = (TD_HR_ERROR_FLAG|0x91),                       /**< Header is new, Upgrade the software.                                                                                                                                                                            */       //DD Header is new, Upgrade the software.                                                                                                                                                                                                                                                                  
      TD_OLD_FILE_BAD_CONVERSION                                           = (TD_HR_ERROR_FLAG|0x92),                       /**< Open Failed. The trace is an old style converted trace. Ask Andy for a newer version.                                                                                                                           */       //DD! Incompatible XG1 imported file. Import with new converter.                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_WAIT_TRY_LATER                                                    = (TD_HR_ERROR_FLAG|0x100),                      /**< TD_WAIT_TRY_LATER                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_TOP_OF_LOGICAL_FILE                                               = (TD_HR_ERROR_FLAG|0x101),                      /**< TD_TOP_OF_LOGICAL_FILE                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      TD_END_OF_LOGICAL_FILE                                               = (TD_HR_ERROR_FLAG|0x102),                      /**< TD_END_OF_LOGICAL_FILE                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      TD_NO_ACTIVE_CHANNEL                                                 = (TD_HR_ERROR_FLAG|0x103),                      /**< TD_NO_ACTIVE_CHANNEL                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      TD_INTERMEDIATE_POSITION_FILE                                        = (TD_HR_ERROR_FLAG|0x104),                      /**< TD_INTERMEDIATE_POSITION_FILE                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_UNKNOWN_POSITION_FILE                                             = (TD_HR_ERROR_FLAG|0x105),                      /**< TD_UNKNOWN_POSITION_FILE                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_END_OF_FILE                                                       = (TD_HR_ERROR_FLAG|0x106),                      /**< TD_END_OF_FILE                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_LINK_TIME_EXTENTS_ARE_DIFFERENT_PER_PORT                          = (TD_HR_ERROR_FLAG|0x107),                      /**<  means that some ports on a link have different time extents than another, certainly true if one port is wrapped and we're NOT in overlapped data mode.                                                         */       // means that some ports on a link have different time extents than another, certainly true if one port is wrapped and we're NOT in overlapped data mode.                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      // A SHOW Stopper                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      TD_CORRUPTED_FILE                                                    = (TD_HR_ERROR_FLAG|0x196),                      /**< TD_CORRUPTED_FILE                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_INVALID_DOMAIN                                                    = (TD_HR_ERROR_FLAG|0x197),                      /**< TD_INVALID_DOMAIN                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_INVALID_HEADER                                                    = (TD_HR_ERROR_FLAG|0x198),                      /**< TD_INVALID_HEADER                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_INVALID_SIGNATURE                                                 = (TD_HR_ERROR_FLAG|0x199),                      /**< Invalid File Signature. The file may be invalid or of an unsupported type.                                                                                                                                      */                                                                                                                                                                                                                                                                                                                  
      // Event Data Size Failure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_INVALID_EVENT_DATA_SIZE                                           = (TD_HR_ERROR_FLAG|0x200),                      /**< TD_INVALID_EVENT_DATA_SIZE                                                                                                                                                                                      */                                                                                                                                                                                                                                                                                                                  
      // The passed Channel is NOT open                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      TD_CHANNEL_NOT_OPEN                                                  = (TD_HR_ERROR_FLAG|0x201),                      /**< TD_CHANNEL_NOT_OPEN                                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
      // The passed info did not point to the Start of an Event                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      TD_NOT_AN_EVENT                                                      = (TD_HR_ERROR_FLAG|0x202),                      /**< TD_NOT_AN_EVENT                                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      // You need to do a Seek to eDirection                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      // prior to getting data in eDirection...                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      TD_WRONG_DIRECTION                                                   = (TD_HR_ERROR_FLAG|0x203),                      /**< TD_WRONG_DIRECTION                                                                                                                                                                                              */                                                                                                                                                                                                                                                                                                                  
      // Could Not Find a TimeStamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
      TD_TIMESTAMP_NOT_FOUND                                               = (TD_HR_ERROR_FLAG|0x204),                      /**< TD_TIMESTAMP_NOT_FOUND                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      TD_FAILED_SERVER_TIMEOUT                                             = (TD_HR_ERROR_FLAG|0x205),                      /**< Time Out on Server's Response                                                                                                                                                                                   */       //DD blocking/sync call timeout                                                                                                                                                                                                                                                                            
      TD_BAD_MESSAGE_FORMAT                                                = (TD_HR_ERROR_FLAG|0x206),                      /**< Bad Message Format from Server                                                                                                                                                                                  */       // blocking/sync call timeout                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      //--------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      // Time Extraction Errors                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      //--------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      // The Start or Stop Time is not in this data set                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      TD_EXT_TIMESTAMP_ERROR                                               = (TD_HR_ERROR_FLAG|0x210),                      /**< TD_EXT_TIMESTAMP_ERROR                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      //  We failed to open a new extraction file                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
      TD_EXT_OPEN_NEW_FILE_FAILED                                          = (TD_HR_ERROR_FLAG|0x211),                      /**< TD_EXT_OPEN_NEW_FILE_FAILED                                                                                                                                                                                     */                                                                                                                                                                                                                                                                                                                  
      // A Bad File Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      TD_EXT_BAD_FILENAME                                                  = (TD_HR_ERROR_FLAG|0x212),                      /**< TD_EXT_BAD_FILENAME                                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
      // Some other Extraction Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
      TD_EXT_UNDEFINED_ERROR                                               = (TD_HR_ERROR_FLAG|0x213),                      /**< TD_EXT_UNDEFINED_ERROR                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      // Extraction In Progress                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      TD_EXT_IN_PROGRESS                                                   = (TD_HR_ERROR_FLAG|0x214),                      /**< TD_EXT_IN_PROGRESS                                                                                                                                                                                              */                                                                                                                                                                                                                                                                                                                  
      // Extraction Failed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      TD_EXT_FAILED                                                        = (TD_HR_ERROR_FLAG|0x215),                      /**< TD_EXT_FAILED                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      // The Extraction has not been opened                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      TD_EXT_NOT_OPENED                                                    = (TD_HR_ERROR_FLAG|0x216),                      /**< TD_EXT_NOT_OPENED                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_ABORTED                                                       = (TD_HR_ERROR_FLAG|0x217),                      /**< TD_EXT_ABORTED                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_WRITE_FAILED                                                  = (TD_HR_ERROR_FLAG|0x218),                      /**< TD_EXT_WRITE_FAILED                                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_OUT_OF_MEMORY                                                 = (TD_HR_ERROR_FLAG|0x219),                      /**< TD_EXT_OUT_OF_MEMORY                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_ABOUT_TO_OPEN                                                 = (TD_HR_ERROR_FLAG|0x21A),                      /**< TD_EXT_ABOUT_TO_OPEN                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_GPd                                                           = (TD_HR_ERROR_FLAG|0x21B),                      /**< TD_EXT_GPd                                                                                                                                                                                                      */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_DISK_FULL                                                     = (TD_HR_ERROR_FLAG|0x21C),                      /**<  Insufficient disk space.\n                                                                                                                                                                                     */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_BAD_PATH                                                      = (TD_HR_ERROR_FLAG|0x21D),                      /**<  Bad Path.\n                                                                                                                                                                                                    */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_TOO_MANY_OPEN_FILES                                           = (TD_HR_ERROR_FLAG|0x21E),                      /**<  Too Many Files Open.\n                                                                                                                                                                                         */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_ACCESS_DENIED                                                 = (TD_HR_ERROR_FLAG|0x21F),                      /**<  Access Denied.\n                                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_HARD_IO                                                       = (TD_HR_ERROR_FLAG|0x220),                      /**<  Hard I/O Error.\n                                                                                                                                                                                              */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_SHARING_VIOLATION                                             = (TD_HR_ERROR_FLAG|0x221),                      /**<  Sharing Violation.\n                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TD_ERROR_FILE_SYSTEM_LIMITATION                                      = (TD_HR_ERROR_FLAG|0x223),                      /**< Write Error: OS errorcode: ERROR_FILE_SYSTEM_LIMITATION (665).\n Windows NTFS compressed file fragmentation issue (KB2891967).\n\n Try defragging the file system, or saving to a non-compressed NTFS folder.   */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      //--------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      // BOOKMARKS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
      //--------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      // No Bookmarks in this Data set                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      TD_NO_BOOKMARKS                                                      = (TD_HR_ERROR_FLAG|0x225),                      /**< TD_NO_BOOKMARKS                                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      // No Bookmark found for this record                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      TD_RECORD_NOT_BOOKMARKED                                             = (TD_HR_ERROR_FLAG|0x226),                      /**< TD_RECORD_NOT_BOOKMARKED                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_EXPERT_BOOKMARK_AREA_FULL_UP                                      = (TD_HR_ERROR_FLAG|0x227),                      /**< TD_EXPERT_BOOKMARK_AREA_FULL_UP                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      TD_BOOKMARK_AREA_FULL_UP                                             = (TD_HR_ERROR_FLAG|0x228),                      /**< TD_BOOKMARK_AREA_FULL_UP                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_NO_10BITDATA                                                      = (TD_HR_ERROR_FLAG|0x242),                      /**< TD_NO_10BITDATA                                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      TD_PLACEHOLDER_EVENT                                                 = (TD_HR_ERROR_FLAG|0x243),                      /**< TD_PLACEHOLDER_EVENT                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_HISTOGRAM_FAILED                                                  = (TD_HR_ERROR_FLAG|0x300),                      /**< TD_HISTOGRAM_FAILED                                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
      TD_HISTOGRAM_ABORTED                                                 = (TD_HR_ERROR_FLAG|0x301),                      /**< TD_HISTOGRAM_ABORTED                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      TD_DELAYED_HISTOGRAM_COMPLETED                                       = (TD_HR_ERROR_FLAG|0x302),                      /**< TD_DELAYED_HISTOGRAM_COMPLETED                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_WRITE_FAILED                                                      = (TD_HR_ERROR_FLAG|0x401),                      /**< TD_WRITE_FAILED                                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      TD_READ_FAILED                                                       = (TD_HR_ERROR_FLAG|0x402),                      /**< TD_READ_FAILED                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_NO_CONFIG                                                         =    (TD_HR_ERROR_FLAG|0x403),                   /**<  There was no config saved with the capture                                                                                                                                                                     */       // There was no config saved with the capture                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_GET_POSITION_FAILED                                               = (TD_HR_ERROR_FLAG|0x500),                      /**< TD_GET_POSITION_FAILED                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      TD_QUICK_SEARCH_INTERNAL_FAILED_TO_MATCH                             = (TD_HR_ERROR_FLAG|0x501),                      /**< TD_QUICK_SEARCH_INTERNAL_FAILED_TO_MATCH                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_QUICK_SEARCH_INTERNAL_LIST_EMPTY                                  = (TD_HR_ERROR_FLAG|0x502),                      /**< TD_QUICK_SEARCH_INTERNAL_LIST_EMPTY                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_ALIAS_WRITE_FAILED                                                = (TD_HR_ERROR_FLAG|0x600),                      /**< TD_ALIAS_WRITE_FAILED                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TD_ALIAS_AREA_FULL_UP                                                = (TD_HR_ERROR_FLAG|0x601),                      /**< TD_ALIAS_AREA_FULL_UP                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TD_ALIAS_READ_FAILED                                                 = (TD_HR_ERROR_FLAG|0x602),                      /**< TD_ALIAS_READ_FAILED                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_STATE_MACHINE_ERROR                                               = (TD_HR_ERROR_FLAG|0x700),                      /**< TD_STATE_MACHINE_ERROR                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      E_EXCEPTION_IN_TRACEDATAIO_DLL                                       = (TD_HR_ERROR_FLAG | 0x800),                    /**< EXCEPTION IN TRACEDATAIO_DLL                                                                                                                                                                                    */                                                                                                                                                                                                                                                                                                                  
      TD_TC_COM_FAILED                                                     = (TD_HR_ERROR_FLAG | 0x801),                    /**< TD_TC_COM_FAILED                                                                                                                                                                                                */       //DD Trace controller not installed?                                                                                                                                                                                                                                                                       
      TD_TC_DETECTED_NO_HARDWARE                                           = (TD_HR_ERROR_FLAG | 0x802),                    /**< TD_TC_DETECTED_NO_HARDWARE                                                                                                                                                                                      */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_QUICK_SEARCH_IN_PROGRESS                                          = (TD_HR_ERROR_FLAG | 0x850),                    /**< TD_QUICK_SEARCH_IN_PROGRESS                                                                                                                                                                                     */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TDIO_EXPERT_HINT_WRITE_ERROR                                         = TD_HR_ERROR_FLAG | 0x900,                      /**< Error occurred while writing expert hints                                                                                                                                                                       */       //DD error occurred while writing expert hints                                                                                                                                                                                                                                                             
      TDIO_EXPERT_HINT_WRITE_BAD_REC_NUM                                   = TD_HR_ERROR_FLAG | 0x901,                      /**< Writing expert hint with a record number that does not reference the beginning of an event.                                                                                                                     */       //DD writing expert hint with a bad record number                                                                                                                                                                                                                                                          
      TDIO_EXPERT_HINT_WRITE_SHORT_EVENT                                   = TD_HR_ERROR_FLAG | 0x902,                      /**< Writing expert hint to a short event.                                                                                                                                                                           */       //DD writing expert hint to a short event                                                                                                                                                                                                                                                                  
      TDIO_EXPERT_HINT_WRITE_ERROR_EVENT                                   = TD_HR_ERROR_FLAG | 0x903,                      /**< Writing expert hint to an event with errors.                                                                                                                                                                    */       //DD writing expert hint to an error event                                                                                                                                                                                                                                                                 
      TDIO_EXPERT_HINT_WRITE_OOO_REC_NUM                                   = TD_HR_ERROR_FLAG | 0x904,                      /**< Writing expert hint with a record number that is out of (incremental)order or duplicated.                                                                                                                       */       //DD writing expert hint with a record number that is out of (incremental)order or duplicated                                                                                                                                                                                                              
      TD_DELETE_HINT_FILE_FAILED                                           = TD_HR_ERROR_FLAG | 0x905,                      /**< could not delete the hint file - another instance of TDIO might have the file open                                                                                                                              */       //DD could not delete the hint file - another instance of TDIO might have the file open                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TDIO_NOT_SUPPORTED                                                   = TD_HR_ERROR_FLAG | 0x1000,                     /**< The API is not supported.                                                                                                                                                                                       */       //DD The API is not supported                                                                                                                                                                                                                                                                              
      TDIO_INTERNAL_ERROR                                                  = TD_HR_ERROR_FLAG | 0x1001,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error, we have a number of flavors so we can track them down if needed                                                                                                                                                                                                                  
      TDIO_INTERNAL_ERROR2                                                 = TD_HR_ERROR_FLAG | 0x1002,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 2                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR3                                                 = TD_HR_ERROR_FLAG | 0x1003,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 3                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR4                                                 = TD_HR_ERROR_FLAG | 0x1004,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 4                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR5                                                 = TD_HR_ERROR_FLAG | 0x1005,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 5                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR6                                                 = TD_HR_ERROR_FLAG | 0x1006,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 6                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR7                                                 = TD_HR_ERROR_FLAG | 0x1007,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 7                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR8                                                 = TD_HR_ERROR_FLAG | 0x1008,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 8                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR9                                                 = TD_HR_ERROR_FLAG | 0x1009,                     /**< TDIO internal error.                                                                                                                                                                                            */       //DD TDIO internal error 9                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORA                                                 = TD_HR_ERROR_FLAG | 0x100A,                     /**< TDIO internal error A                                                                                                                                                                                           */       //DD TDIO internal error A                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORB                                                 = TD_HR_ERROR_FLAG | 0x100B,                     /**< TDIO internal error B                                                                                                                                                                                           */       //DD TDIO internal error B                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORC                                                 = TD_HR_ERROR_FLAG | 0x100C,                     /**< TDIO internal error C                                                                                                                                                                                           */       //DD TDIO internal error C                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORD                                                 = TD_HR_ERROR_FLAG | 0x100D,                     /**< TDIO internal error D                                                                                                                                                                                           */       //DD TDIO internal error D                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORE                                                 = TD_HR_ERROR_FLAG | 0x100E,                     /**< TDIO internal error E                                                                                                                                                                                           */       //DD TDIO internal error E                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERRORF                                                 = TD_HR_ERROR_FLAG | 0x100F,                     /**< TDIO internal error F                                                                                                                                                                                           */       //DD TDIO internal error F                                                                                                                                                                                                                                                                                 
      TDIO_INTERNAL_ERROR10                                                = TD_HR_ERROR_FLAG | 0x1010,                     /**< TDIO internal error 10                                                                                                                                                                                          */       //DD TDIO internal error 10                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR11                                                = TD_HR_ERROR_FLAG | 0x1011,                     /**< TDIO internal error 11                                                                                                                                                                                          */       //DD TDIO internal error 11                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR12                                                = TD_HR_ERROR_FLAG | 0x1012,                     /**< TDIO internal error 12                                                                                                                                                                                          */       //DD TDIO internal error 12                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR13                                                = TD_HR_ERROR_FLAG | 0x1013,                     /**< TDIO internal error 13                                                                                                                                                                                          */       //DD TDIO internal error 13                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR14                                                = TD_HR_ERROR_FLAG | 0x1014,                     /**< TDIO internal error 14                                                                                                                                                                                          */       //DD TDIO internal error 14                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR15                                                = TD_HR_ERROR_FLAG | 0x1015,                     /**< TDIO internal error 15                                                                                                                                                                                          */       //DD TDIO internal error 15                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR16                                                = TD_HR_ERROR_FLAG | 0x1016,                     /**< TDIO internal error 16                                                                                                                                                                                          */       //DD TDIO internal error 16                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR17                                                = TD_HR_ERROR_FLAG | 0x1017,                     /**< TDIO internal error 17                                                                                                                                                                                          */       //DD TDIO internal error 17                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR18                                                = TD_HR_ERROR_FLAG | 0x1018,                     /**< TDIO internal error 18                                                                                                                                                                                          */       //DD TDIO internal error 18                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR19                                                = TD_HR_ERROR_FLAG | 0x1019,                     /**< TDIO internal error 19                                                                                                                                                                                          */       //DD TDIO internal error 19                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1A                                                = TD_HR_ERROR_FLAG | 0x101A,                     /**< TDIO internal error 1A                                                                                                                                                                                          */       //DD TDIO internal error 1A                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1B                                                = TD_HR_ERROR_FLAG | 0x101B,                     /**< TDIO internal error 1B                                                                                                                                                                                          */       //DD TDIO internal error 1B                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1C                                                = TD_HR_ERROR_FLAG | 0x101C,                     /**< TDIO internal error 1C                                                                                                                                                                                          */       //DD TDIO internal error 1C                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1D                                                = TD_HR_ERROR_FLAG | 0x101D,                     /**< TDIO internal error 1D                                                                                                                                                                                          */       //DD TDIO internal error 1D                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1E                                                = TD_HR_ERROR_FLAG | 0x101E,                     /**< TDIO internal error 1E                                                                                                                                                                                          */       //DD TDIO internal error 1E                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR1F                                                = TD_HR_ERROR_FLAG | 0x101F,                     /**< TDIO internal error 1F                                                                                                                                                                                          */       //DD TDIO internal error 1F                                                                                                                                                                                                                                                                                
      TDIO_INTERNAL_ERROR20                                                = TD_HR_ERROR_FLAG | 0x1020,                     /**< TDIO internal error 20                                                                                                                                                                                          */       //DD TDIO internal error 20                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      // System errors                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      TDIO_OUT_OF_MEMORY                                                   = TD_HR_ERROR_FLAG | 0x1100,                     /**< The system is out of memory.                                                                                                                                                                                    */       //DD The system is out of memory                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TDIO_DWORD_VIEW_NOT_SUPPORTED                                        = TD_HR_ERROR_FLAG | 0x1200,                     /**< The DWORD View is not supported.                                                                                                                                                                                */       //DD The DWORD View is not supported                                                                                                                                                                                                                                                                       
      TDIO_SPL_VIEW_NOT_SUPPORTED                                          = TD_HR_ERROR_FLAG | 0x1201,                     /**< The SPL View is not supported                                                                                                                                                                                   */       //DD The SPL View is not supported                                                                                                                                                                                                                                                                         
      TDIO_SMART_COMPARATOR_MISMATCH                                       = TD_HR_ERROR_FLAG | 0x1300,                     /**< smart comparator issue.                                                                                                                                                                                         */       //DD smart comparator issue.                                                                                                                                                                                                                                                                               
      TDIO_CANT_SCRAMBLE_EVENT                                             = TD_HR_ERROR_FLAG | 0x1400,                     /**< The data in this event can't be scrambled.                                                                                                                                                                      */       //DD Event data can't be scrambled                                                                                                                                                                                                                                                                         
      TDIO_NO_SEGMENT_INFO                                                 = TD_HR_ERROR_FLAG | 0x1500,                     /**< Capture does not contain OOB Graph meta data.                                                                                                                                                                   */       //DD can't do OOB start/end because of lack of segment info.                                                                                                                                                                                                                                               
      TDIO_STARTING_RECORD_NOT_SN                                          = TD_HR_ERROR_FLAG | 0x1501,                     /**< Caller specified SN for a Non-SN event                                                                                                                                                                          */       //DD Caller specified SN for a Non-SN event                                                                                                                                                                                                                                                                
      TDIO_STARTING_RECORD_NOT_OOB                                         = TD_HR_ERROR_FLAG | 0x1502,                     /**< Caller specified OOB for a Non-OOB event                                                                                                                                                                        */       //DD Caller specified OOB for a Non-OOB event                                                                                                                                                                                                                                                              
      TDIO_STARTING_RECORD_NOT_OOB_OR_SN                                   = TD_HR_ERROR_FLAG | 0x1503,                     /**< Caller passed the time of a non-OOB/non-SN event                                                                                                                                                                */       //DD Caller passed the time of a non-OOB/non-SN event                                                                                                                                                                                                                                                      
      TDIO_STARTING_RECORD_TYPE_NOT_VALID                                  = TD_HR_ERROR_FLAG | 0x1504,                     /**< Caller should pass passed StartingRecordIsOOB or StartingRecordIsSN                                                                                                                                             */       //DD Caller should pass passed StartingRecordIsOOB or StartingRecordIsSN                                                                                                                                                                                                                                   
      TDIO_SN_OOB_FAILED                                                   = TD_HR_ERROR_FLAG | 0x1505,                     /**< Generic Failure of the Start/End SN/OOB                                                                                                                                                                         */       //DD Generic Failure of the Start/End SN/OOB                                                                                                                                                                                                                                                               
      TDIO_STARTING_RECORD_NOT_PM_PARTIAL_IDLE                             = TD_HR_ERROR_FLAG | 0x1506,                     /**< Caller passed the time of a non-Power Management event                                                                                                                                                          */       //DD Caller passed the time of a non-Power Management event                                                                                                                                                                                                                                                
      TDIO_STARTING_RECORD_NOT_PM_PARTIAL_RECOVERY                         = TD_HR_ERROR_FLAG | 0x1507,                     /**< Caller passed the time of a non-Power Management event                                                                                                                                                          */       //DD Caller passed the time of a non-Power Management event                                                                                                                                                                                                                                                
      TDIO_STARTING_RECORD_NOT_PM_SLUMBER_IDLE                             = TD_HR_ERROR_FLAG | 0x1508,                     /**< Caller passed the time of a non-Power Management event                                                                                                                                                          */       //DD Caller passed the time of a non-Power Management event                                                                                                                                                                                                                                                
      TDIO_STARTING_RECORD_NOT_PM_SLUMBER_RECOVERY                         = TD_HR_ERROR_FLAG | 0x1509,                     /**< Caller passed the time of a non-Power Management event                                                                                                                                                          */       //DD Caller passed the time of a non-Power Management event                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      //Extraction of Level-2 hint files error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      TD_EXT_EH_RECNUM_ERROR                                               = (TD_HR_ERROR_FLAG|0x1600),                     /**<  Invalid record range passed in for Expert Hint file extraction.\n                                                                                                                                              */       //invalid record range passed in for EH file extraction                                                                                                                                                                                                                                                    
      TD_EXT_EH_OPEN_SRC_FILE_FAILED                                       = (TD_HR_ERROR_FLAG|0x1601),                     /**<  Failed to open source expert hint file for extraction.\n                                                                                                                                                       */       //src expert hint file opening error                                                                                                                                                                                                                                                                       
      TD_EXT_EH_OPEN_NEW_FILE_FAILED                                       = (TD_HR_ERROR_FLAG|0x1602),                     /**<  Failed to create/open destination expert hint file for extraction.\n                                                                                                                                           */       //dst expert hint file opening error                                                                                                                                                                                                                                                                       
      TD_EXT_EH_FAILED                                                     = (TD_HR_ERROR_FLAG|0x1603),                     /**<  Failed to extract expert hint file.\n                                                                                                                                                                          */       //expert hint file extraction failed                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      //Extraction - creating TGD error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      TD_EXT_TGD_NO_BASENAME                                               = (TD_HR_ERROR_FLAG|0x1610),                     /**<  Basename must be supplied for creating .tgd folder and .tgp file.\n                                                                                                                                            */       //no basename for creating .tgd and .tgp                                                                                                                                                                                                                                                                   
      TD_EXT_TGD_BASENAME_DIR_EXISTS                                       = (TD_HR_ERROR_FLAG|0x1611),                     /**<  Basename must not match an existing directory.\n                                                                                                                                                               */       //basename is an existing directory                                                                                                                                                                                                                                                                        
      TD_EXT_TGD_NESTED                                                    = (TD_HR_ERROR_FLAG|0x1612),                     /**<  No nested TGDs allowed or even saving to the same name twice.\n                                                                                                                                                */                                                                                                                                                                                                                                                                                                                  
      TD_EXT_TGD_CREATE_FAILED                                             = (TD_HR_ERROR_FLAG|0x1613),                     /**<  Failed to create .TGD directory.\n                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      //SaveToUsb error/status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      TD_SAVETOUSB_FAILEDTOSTART                                           = (TD_HR_ERROR_FLAG|0x1700),                     /**<  Failed to start the USB save. Intra chassis message failed\n                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FOLDER_ERROR                                            = (TD_HR_ERROR_FLAG|0x1701),                     /**<  Failed to create the folder on the USB drive.\n                                                                                                                                                                */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_IN_PROGRESS                                             = (TD_HR_ERROR_FLAG|0x1702),                     /**< TD_SAVETOUSB_IN_PROGRESS                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_ABORTING                                                = (TD_HR_ERROR_FLAG|0x1703),                     /**< Canceling Save to USB.\n                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_ABORTED                                                 = (TD_HR_ERROR_FLAG|0x1704),                     /**< Canceled Save to USB.\n                                                                                                                                                                                         */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_GUID_MISMATCH                                    = (TD_HR_ERROR_FLAG|0x1705),                     /**< Internal error: USB save GUID mismatch.\n                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED                                                  = (TD_HR_ERROR_FLAG|0x1706),                     /**< General failure to save to USB.\n                                                                                                                                                                               */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_TCS_BUSY_WITH_SAVE                               = (TD_HR_ERROR_FLAG|0x1707),                     /**< Chassis is already busy saving to USB. Try again later.\n                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_INTERNAL_FAIL                                    = (TD_HR_ERROR_FLAG|0x1708),                     /**< Internal error TCS.\n                                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_BAD_FILENAME                                     = (TD_HR_ERROR_FLAG|0x1709),                     /**< USB save failed: Bad Filename.\n                                                                                                                                                                                */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_TO_CANCEL                                        = (TD_HR_ERROR_FLAG|0x170A),                     /**< TD_SAVETOUSB_FAILED_TO_CANCEL                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_TO_LAUNCH                                        = (TD_HR_ERROR_FLAG|0x170B),                     /**< USB save failed: Failed to start.\n                                                                                                                                                                             */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_NETWORK                                          = (TD_HR_ERROR_FLAG|0x170C),                     /**< TD_SAVETOUSB_FAILED_NETWORK                                                                                                                                                                                     */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_INTERNAL_1                                       = (TD_HR_ERROR_FLAG|0x1711),                     /**< TD_SAVETOUSB_FAILED_INTERNAL_1                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_SAVETOUSB_FAILED_INTERNAL_2                                       = (TD_HR_ERROR_FLAG|0x1712),                     /**< TD_SAVETOUSB_FAILED_INTERNAL_2                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_QTAG_STATE_ERROR                                                  = (TD_HR_ERROR_FLAG | 0x2000),                   /**<  QTAG state machine error                                                                                                                                                                                       */       // QTAG state machine error                                                                                                                                                                                                                                                                                
      TD_QTAG_BAD_PARAMS                                                   =  (TD_HR_ERROR_FLAG | 0x2001),                  /**<  QTAG failure                                                                                                                                                                                                   */       // QTAG failure                                                                                                                                                                                                                                                                                            
      TD_QTAG_NO_SUPPORT                                                   =  (TD_HR_ERROR_FLAG | 0x2002),                  /**<  QTAG failure                                                                                                                                                                                                   */       // QTAG failure                                                                                                                                                                                                                                                                                            
      TD_QTAG_BAD_VERSION_INFO                                             =  (TD_HR_ERROR_FLAG | 0x2003),                  /**<  QTAG failure - unrecognised version. Get a new client.                                                                                                                                                         */       // QTAG failure - unrecognised version. Get a new client.                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_INVALID_SUBDOMAIN                                                 = (TD_HR_ERROR_FLAG|0x9997),                     /**< TD_INVALID_SUBDOMAIN                                                                                                                                                                                            */                                                                                                                                                                                                                                                                                                                  
      // Application Exiting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      TD_APPLICATION_EXITING                                               = (TD_HR_ERROR_FLAG|0x9998),                     /**< TD_APPLICATION_EXITING                                                                                                                                                                                          */                                                                                                                                                                                                                                                                                                                  
      // Function Not Implemented                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
      TD_FUNCTION_NOT_IMPLEMENTED                                          = (TD_HR_ERROR_FLAG|0x9999),                     /**< TD_FUNCTION_NOT_IMPLEMENTED                                                                                                                                                                                     */                                                                                                                                                                                                                                                                                                                  
      // Parameter Error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      TD_CDR_DWORD_ALIGN_ERROR                                             = (TD_HR_ERROR_FLAG|0xEEED),                     /**< TD_CDR_DWORD_ALIGN_ERROR                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_PARAMETER_ERROR                                                   = (TD_HR_ERROR_FLAG|0xEEEE),                     /**< TD_PARAMETER_ERROR                                                                                                                                                                                              */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL                                                            = (TD_HR_ERROR_FLAG|0xFF00),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL1                                                           = (TD_HR_ERROR_FLAG|0xFF01),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL2                                                           = (TD_HR_ERROR_FLAG|0xFF02),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL3                                                           = (TD_HR_ERROR_FLAG|0xFF03),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL4                                                           = (TD_HR_ERROR_FLAG|0xFF04),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL5                                                           = (TD_HR_ERROR_FLAG|0xFF05),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL6                                                           = (TD_HR_ERROR_FLAG|0xFF06),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL7                                                           = (TD_HR_ERROR_FLAG|0xFF07),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL8                                                           = (TD_HR_ERROR_FLAG|0xFF08),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL9                                                           = (TD_HR_ERROR_FLAG|0xFF09),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0a                                                        = (TD_HR_ERROR_FLAG|0xFF0a),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0b                                                        = (TD_HR_ERROR_FLAG|0xFF0b),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0c                                                        = (TD_HR_ERROR_FLAG|0xFF0c),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0d                                                        = (TD_HR_ERROR_FLAG|0xFF0d),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0e                                                        = (TD_HR_ERROR_FLAG|0xFF0e),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x0f                                                        = (TD_HR_ERROR_FLAG|0xFF0f),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x10                                                        = (TD_HR_ERROR_FLAG|0xFF10),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x11                                                        = (TD_HR_ERROR_FLAG|0xFF11),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x12                                                        = (TD_HR_ERROR_FLAG|0xFF12),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x13                                                        = (TD_HR_ERROR_FLAG|0xFF13),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x14                                                        = (TD_HR_ERROR_FLAG|0xFF14),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x15                                                        = (TD_HR_ERROR_FLAG|0xFF15),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x16                                                        = (TD_HR_ERROR_FLAG|0xFF16),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x17                                                        = (TD_HR_ERROR_FLAG|0xFF17),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x18                                                        = (TD_HR_ERROR_FLAG|0xFF18),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x19                                                        = (TD_HR_ERROR_FLAG|0xFF19),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1a                                                        = (TD_HR_ERROR_FLAG|0xFF1a),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1b                                                        = (TD_HR_ERROR_FLAG|0xFF1b),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1c                                                        = (TD_HR_ERROR_FLAG|0xFF1c),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1d                                                        = (TD_HR_ERROR_FLAG|0xFF1d),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1e                                                        = (TD_HR_ERROR_FLAG|0xFF1e),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x1f                                                        = (TD_HR_ERROR_FLAG|0xFF1f),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x20                                                        = (TD_HR_ERROR_FLAG|0xFF20),                     /**< Internal Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x21                                                        = (TD_HR_ERROR_FLAG|0xFF21),                     /**< TD_E_FAIL0x21                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x22                                                        = (TD_HR_ERROR_FLAG|0xFF22),                     /**< TD_E_FAIL0x22                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x23                                                        = (TD_HR_ERROR_FLAG|0xFF23),                     /**< TD_E_FAIL0x23                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x24                                                        = (TD_HR_ERROR_FLAG|0xFF24),                     /**< TD_E_FAIL0x24                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x25                                                        = (TD_HR_ERROR_FLAG|0xFF25),                     /**< TD_E_FAIL0x25                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x26                                                        = (TD_HR_ERROR_FLAG|0xFF26),                     /**< TD_E_FAIL0x26                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x27                                                        = (TD_HR_ERROR_FLAG|0xFF27),                     /**< TD_E_FAIL0x27                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x28                                                        = (TD_HR_ERROR_FLAG|0xFF28),                     /**< TD_E_FAIL0x28                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x29                                                        = (TD_HR_ERROR_FLAG|0xFF29),                     /**< TD_E_FAIL0x29                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x2a                                                        = (TD_HR_ERROR_FLAG|0xFF2a),                     /**< TD_E_FAIL0x2a                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x2b_HWF_SIGNATURE                                          = (TD_HR_ERROR_FLAG|0xFF2b),                     /**< Hardware Failure: HWF Signature                                                                                                                                                                                 */                                                                                                                                                                                                                                                                                                                  
      TD_E_FAIL0x2c                                                        = (TD_HR_ERROR_FLAG|0xFF2c),                     /**< TD_E_FAIL0x2c                                                                                                                                                                                                   */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_NAVSUM_INSTANCE_TOO_HIGH                                          = (TD_HR_ERROR_FLAG|0x10001),                    /**< Summary Navigation Failed: Not enough instances in capture                                                                                                                                                      */       // Goto Nth Occurrance and N > Nmax in the selected channels.                                                                                                                                                                                                                                              
      TD_NAVSUM_INSTANCE_IS_ONE_BASED                                      = (TD_HR_ERROR_FLAG|0x10002),                    /**< Summary Navigation Failed: Must pass non zero value of N                                                                                                                                                        */       // Goto Nth Occurrance and N must be >= 0.                                                                                                                                                                                                                                                                 
      TD_NO_TSV                                                            = (TD_HR_ERROR_FLAG|0x10003),                    /**<  No TSV. Channel does not have any TSV available.                                                                                                                                                               */       // No TSV. Channel does not have any TSV available.                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TD_TDIO_EXCEPTION_DUE_TO_HARDWARE_BUFFER                             = (TD_HR_ERROR_FLAG|0xC0FFE0D0),                 /**< Hardware Read/Write Error                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_HARDWARE_BUFFER_READ                        = (TD_HR_ERROR_FLAG|0xC0FFEEDC),                 /**< Hardware Read/Write Error                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_HARDWARE_BUFFER_READ_WITH_ERROR             = (TD_HR_ERROR_FLAG|0xC0FFEEDD),                 /**< Hardware Read/Write Error                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_HARDWARE_BUFFER_WRITE                       = (TD_HR_ERROR_FLAG|0xC0FFFFFD),                 /**< Hardware Read/Write Error                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_HARDWARE_BUFFER_WRITE_WITH_ERROR            = (TD_HR_ERROR_FLAG|0xC0FF00DD),                 /**< Hardware Read/Write Error                                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_CORRUPT_FILE_BUFFER                         = (TD_HR_ERROR_FLAG|0xC0EFE0D1),                 /**< Error: Corrupted Capture                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_CAPTURE_START                               = (TD_HR_ERROR_FLAG|0xC0EFE0D2),                 /**< Error: Corrupted Capture                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_CORRUPT_EMPTY_TIMESTAMP                     = (TD_HR_ERROR_FLAG|0xC0EFE0D3),                 /**< Error: Corrupted Capture                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
      TD_TDIO_EXCEPTION_DUE_TO_CORRUPT_TIMESTAMP                           = (TD_HR_ERROR_FLAG|0xC0EFE0D4),                 /**< Error: Corrupted Capture                                                                                                                                                                                        */                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR1                          = (0x8000E001),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR2                          = (0x8000E002),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR3                          = (0x8000E003),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR4                          = (0x8000E004),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR5                          = (0x8000E005),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR6                          = (0x8000E006),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_NN                        = (0x8000E010),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_Unknown=0,                                                                                                                                                                                                                                                                                           
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_N1                        = (0x8000E011),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_Connected=1,                                                                                                                                                                                                                                                                                         
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_N2                        = (0x8000E012),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_WaitingForConnect=2,                                                                                                                                                                                                                                                                                 
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_N3                        = (0x8000E013),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_ConnectedAndGotSocket=3,                                                                                                                                                                                                                                                                             
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_N4                        = (0x8000E014),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_Bad=4,                                                                                                                                                                                                                                                                                               
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_N5                        = (0x8000E015),                                  /**< Network Timed Out During Remote Call.                                                                                                                                                                           */       //DDE_Invalid=5                                                                                                                                                                                                                                                                                            
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_AUTHENTICATION_DEPRECATED = (0x8000E016),                                  /**< Authentication Error                                                                                                                                                                                            */       // DO NOT USE, use TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_AUTHENTICATION_BASE thru TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_AUTHENTICATION_BASE_MAX instead.                                                                                                                                         
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_CRYPTO                    = (0x8000E017),                                  /**< Crypto32 Error                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_E100_SERIES               = (0x8000E100),                                  /**< Communication Error 0x%X (EncryptFailure)                                                                                                                                                                       */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_AUTHENTICATION_BASE       = (0x8000E200),                                  /**< 0x8000E200-0x8000E23F will be used for more detailed authentication failure                                                                                                                                     */       //0x8000E200-0x8000E23F will be used for more detailed authentication failure                                                                                                                                                                                                                              
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_AUTHENTICATION_BASE_MAX   = (0x8000E23F),                                  /**< 0x8000E200-0x8000E23F will be used for more detailed authentication failure                                                                                                                                     */       //0x8000E200-0x8000E23F will be used for more detailed authentication failure                                                                                                                                                                                                                              
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA1                         = (TD_HR_ERROR_FLAG|0x8000F001),                 /**< TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA1                                                                                                                                                                    */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA2                         = (TD_HR_ERROR_FLAG|0x8000F002),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA3                         = (TD_HR_ERROR_FLAG|0x8000F003),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA4                         = (TD_HR_ERROR_FLAG|0x8000F004),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA5                         = (TD_HR_ERROR_FLAG|0x8000F005),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA6                         = (TD_HR_ERROR_FLAG|0x8000F006),                 /**< TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERRORA6                                                                                                                                                                    */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F1                        = (TD_HR_ERROR_FLAG|0x8000F101),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F2                        = (TD_HR_ERROR_FLAG|0x8000F102),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F3                        = (TD_HR_ERROR_FLAG|0x8000F103),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F4                        = (TD_HR_ERROR_FLAG|0x8000F104),                 /**< Network Timed Out During Remote Call.                                                                                                                                                                           */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F5                        = (TD_HR_ERROR_FLAG|0x8000F105),                 /**< Network Error.                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F6                        = (TD_HR_ERROR_FLAG|0x8000F106),                 /**< Network Error.                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F7                        = (TD_HR_ERROR_FLAG|0x8000F107),                 /**< Network Error.                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  
      TDIO_EXCEPTION_DUE_TO_COMMUNICATIONS_ERROR_F8                        = (TD_HR_ERROR_FLAG|0x8000F108),                 /**< Network Error.                                                                                                                                                                                                  */                                                                                                                                                                                                                                                                                                                  



      };                                                // when returned by a TraceData call...


//-----------------------------------------------------------------------------
// The direction of event movement on a Get Event call,
//
// Forward,  the event pointer is increment after the call,
// Backward, the event pointer is decrement after the call,
//-----------------------------------------------------------------------------
typedef enum Direction
#if (_MSC_VER >= 1400)
#pragma warning(disable:4480)
: int                  // tell the compiler what type to use to hold these enum values
#endif //#ifdef VS2005 or better
{
    FORWARD = 0,
    BACKWARD = 1,
    UNKNOWN_DIRECTION
};


namespace TDIO
{
    typedef enum SpecialFlags
    {
        NothingSpecial=0,
        SASTrainingRLC=1,
        SASTrainingFrameConcat=2,
        SASTrainingFrameManchesterDecode=4,
        PCIeLTTSMSpecialL0Filtermode=8,
        OOBSNPseduoEventFilterMode=16,  // skips all non-OOB records, and only returns OOB events with Pseudo events.
    };
    typedef unsigned int SpecialFlagsBitfield;  // combine the enums above into this bitfield

    typedef enum ETypeOfView
    {
        UnknownTypeOfView=-1,
        MainView=0,
        DWORDView=1, DWordView=1, LANEView=1, LaneView=1, // for now our current model does not differentiate these two
        SPLView=2
    }ETypeOfView;
};




#include "EventType.h"
//enum Signature
//typedef enum EventType

#include "EventStruct.h"

typedef __int64 FilePos;
typedef unsigned __int64 UINT64;

#define TH_TRACENAME_SIZE       33
#define TH_TRACEDATE_SIZE       11
#define TH_STARTTIME_SIZE       9
#define TH_STOPTIME_SIZE        9
#define TH_SYSTEMNAME_SIZE      16
#define TH_UNITNAME_SIZE        16
#define TH_BOARDNAME_SIZE       16
#define TH_CHANNELNAME_SIZE     (80)
#define TH_CHANNELNAME_EXTRA_SPACE_SIZE     (64)     //!< reserve extra space for expert to extend the names.
#define TH_TRACENOTES_SIZE      128
#define TH_TRACEAUTHOR_SIZE     33
#define TH_VERSION              11

#include "TDIOCommondefines.h"
typedef enum E_CaptureWrappedEnums
{
    WrapStatusUnknown = CAPTURE_WRAPPED_STATUS_UNKNOWN,
    CaptureWrapped = CAPTURE_WRAPPED,
    CaptureNotWrapped = CAPTURE_NOT_WRAPPED
};


namespace TDIO
{
    typedef enum TriggerHintInfo
    {
        // perhaps a bitfield
        NoHint=0,
        SeekForward=1,
        SeekBackward=2
    };
};

typedef enum ETrafficSummaryState
{
    eTSSStateIsUnknown,             // default state, needs to be set to a valid state
    eTSSNoTrafficSummary,
    eTSSHasTrafficSummary,          // traffic summary data generated by H/W generator
    eTSSHasTrafficSummaryAndItsNotReadyYet,  // Server has the data, it's on its way - but we've not finished getting/crunching it. Try again later!
    eTSSObsoleteTrafficSummary,     // old obsolete files
    eTSSBySoftware,                 // traffic summary data generated by S/W generator
    eTSSDataCorrupted,              // traffic summary data exists but invalid
    eTSSMemFull,                    // traffic summary data buffer filled
    eTSSUnavailable,                // traffic summary data unavailable.
    eTSSUnavailableOutOfMemory_First
#ifndef _DEBUG
    =30     // TV shows these errorcodes numerically in release mode, therefore need to know actual values of these things.  eTSSUnavailableOutOfMemory_
#endif // #ifndef _DEBUG
    ,eTSSUnavailableOutOfMemory_ullAvailPhys,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory_ullAvailVirtual,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory_dwMemoryLoad,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory_CMemoryException,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory6,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory7,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory8,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory9,     // traffic summary data unavailable: Client is out of Memory.
    eTSSUnavailableOutOfMemory_Last,     // traffic summary data unavailable: Client is out of Memory.
    eTSSStateIsInvalid,             // all valid states are >= eTSSStateIsUnknown and < eTSSStateIsInvalid
};






//---------------------------------------------------------------------
// The Capture Info Items Structure
//---------------------------------------------------------------------
struct CaptureInfo
{

    CaptureInfo()
    {
        Reset();
    }

    void Reset()
    {
        size_t num_bytes = sizeof(*this);
        memset(this,0,num_bytes);
    }

    void GetPortName(char *name, size_t len)
    {
        if (strlen(sChannelName))
        {
            strcpy_s(name,len, sChannelName);
            return;
        }
        sprintf_s(name,len,"Port (%d)", DomainOrdinalNumber+1);
    }


    Signature eSignature;    //!< FCS, GTA, GT2, or IBT1.
    char Signature[8];

    double dTickTime;        //!< The time in usec of the system tick
    double dWordTime;        //!< The time in usec of the system Tx/Rx Word Time

    bool bTraceValid;        //!< false = invalid ( not captured yet), true = valid (captured).
    bool bTriggerValid;        //!< false = No Trigger, true = Trigger.

    UINT nStartOfTrace;     //!< Byte Offset From Beginning of File.
    FilePos nEndOfTrace;        //!< Byte Offset From Beginning of File.
    FilePos nTraceSize;            //!< Byte size of the captured data.

    UINT nChannelNumber;        //!< Maximum Number Of Channels. (0 - n)

    char sTraceName[TH_TRACENAME_SIZE];        //!< 32 characters with a \0 terminator.
    char sTraceDate[TH_TRACEDATE_SIZE];        //!< 10 characters with a \0 terminator.  Date trace started.
    char sStartTime[TH_STARTTIME_SIZE];        //!< 10 characters with a \0 terminator.  Time Trace started.
    char sStopTime[TH_STOPTIME_SIZE];        //!< 10 characters with a \0 terminator.  Time Trace stopped.
    bool bUTCTime; //!< true if the date/time is in UTC format.

    char sSystemName[TH_SYSTEMNAME_SIZE];    //!< 16 characters with a \0 terminator.
    char sUnitName[TH_UNITNAME_SIZE];        //!< 16 characters with a \0 terminator.
    char sBoardName[TH_BOARDNAME_SIZE];        //!< 16 characters with a \0 terminator.
    char sChannelName[TH_CHANNELNAME_SIZE+TH_CHANNELNAME_EXTRA_SPACE_SIZE+2];

    char sTraceNotes[TH_TRACENOTES_SIZE];    //!< 255 characters with a \0 terminator. A place for user notes.
    char sTraceAuthor[TH_TRACEAUTHOR_SIZE];    //!< 32 characters with a \0 terminator.

    bool bTraceIsReadOnly;

    long _cDIPSwitchValue;
    long _lIOLayerConf;
    long _lHeaderSize;            //!< the size of the TOTAL header area before the trace data
    long _lDRAMSize;            //!< the memory trace size (bytes)
    long _lDMABufferSize;        //!< the size of the largest DMA buffer possible
    union
    {
        long _lBitFileVersion;        //!< the bitfile version info
        _BitFileVersion BitFileInfo;
    };
    long _lCardID;                //!< the card device ID

    long _TDIOVersion;

    char sTDIOVersion[32]; //!< GTX 10.73.21.56 13 april 1956.

    int DomainOrdinalNumber; //!< gives the ordinal of the port in the domain. zero based.



    //---------------------------------------------------------------------
    // Post Process Information, filled in by Post Processing
    //  Data Processor Code...
    // All Post Process Information is Defaulted to ZERO(0)
    //---------------------------------------------------------------------
    bool bPostProcess;        //!< Marked = true if post processing was completed.
    // The following is valid only if PostProcess = 1
    double dFirstTimeStamp;        //!< The FIRST Timestamp value in this file.
    double dLastTimeStamp;        //!< The LAST  Timestamp value in this file.
    double dEndOfDataTime;        //!< The time of the last record in this data set


    bool ExtractionTimesValid; //!< will be true if the following 2 members are valid
    double ExtractionStartTime; //!< will be -1.0 if invalid
    double ExtractionEndTime;   //!< will be -1.0 if invalid
                                //


    double dTriggerTime;        //!< What time did the trigger occur,
                                //!< only good if TriggerValid == true...

    bool bEnhancedTriggerInfo;  //!< if true then you're in luck we have extra trigger info
    unsigned int nVersionMajor; //!< the build that captured this channel
    unsigned int nVersionMinorA;//!< the build that captured this channel
    unsigned int nVersionMinorB;//!< the build that captured this channel
    unsigned int nVersionBuildNumber;//!< the build that captured this channel
    int EnhancedTriggerInfo_TriggerChannelOrdinal; //!< this is the channel that triggered. This can be compared with the DomainOrdinalNumber to see if this was the trigger channel.
    double EnhancedTriggerInfo_TriggerTime; //!< actual trigger time
    UINT64 EnhancedTriggerInfo_TriggerTimeIn10PicoSecondsLegacy; //!< Trigger Time - same as above - but different units
    UINT EnhancedTriggerInfo_TriggerRecordNumberDeprecated; //!< Record where the trigger occurred
    UINT EnhancedTriggerInfo_TriggerRecordOffset; //!< will be zero
//    double EnhancedTriggerInfo_TriggerEventTime;
    char EnhancedTriggerInfo_TriggerChannelName[TH_CHANNELNAME_SIZE+TH_CHANNELNAME_EXTRA_SPACE_SIZE]; //!< name of the port that triggered.
    UINT EnhancedTriggerInfo_TriggerFlavor;  //!< type of trigger. Bit field. look at the enums CHANNEL_TRIGGERED_FROM_INTERNAL, CHASSIS_TRIGGERED_FROM_TTL_IN etc.. Tells you how the triggering channel actually triggered.
    UINT EnhancedTriggerInfo_TriggerTDIOChannelIndex;  //!< this is the TDIO channel index of the trigger channel. It will be CHANNEL_DONT_CARE if the triggered channel was not opened by this instance of TDIO.


    UINT NumBitsOnTheWire;        //!< 40 for 2G FC,  66 for 10G FC
    UINT NumBitsReceivedData;   //!< 32 for 2G FC, 64 for 10G FC
    double GigabitsPerSecond;    //!< 1.0625 for 1G FC, 1.25 for GE
    char BitRateAsString[64];   //!<  "1.25 Gbps" for GE
    char ProtocolAsString[64];   //!<  "Fibre Channel", "Ethernet"

    int WideLinkID;             //!< lets you figure out if this channel is part of a wide link - and if so which wide link it's a member of.
    int NumChannelsInThisWideLink; //!< lets you know how many channels are in the wide link.
    E_CaptureWrappedEnums Link_CaptureWrapStatus;   //!< true if any port in the link wrapped
    char WideLinkName[80];//!< empty if WideLinkID = 0



// These are the TC values - as written by TC at start of capture.
    short TC_WideLinkID;             //!< lets you figure out if this channel is part of a wide link - and if so which wide link it's a member of.
    short TC_NumChannelsInThisWideLink; //!< lets you know how many channels are in the wide link.
    E_CaptureWrappedEnums CaptureWrapStatus; //! Lets you know if this port wrapped or not
    char TC_WideLinkName[80];//!< empty if WideLinkID = 0


    bool bSupportsDWORDView; //!< true if this channel is DWORD view capable.
    bool OOB2Supported; //!< true if OOB2 EventStructs are available.

    UINT nCDRLossLockCount;  //!< CDR Loss Lock Count for 8G FC blade
    int Blade;          //!< one based
    int Port;               //!< one based
    int ChassisOrdinal;     //!< one based
    WORD Segment;           //!< Segment of this capture
    WORD TotalSegments;     //!< Total number of segments reserved in buffer memory
    TDIO::TriggerHintInfo TriggerHint;  //!< Lets you know if the event's start time is ahead or behind the actual trigger time. (e.g. suppose trigger was on frame CRC then frame start time would be before the trigger time)
    UINT OOBCaptureMode;  //!< used for GUI OOB graph decision
    bool m_MultiplexingEnabled; //!< Will be zero if multiplexing is not available
    int m_MultiplexedChannel; //!< values: 0 for MUX0, 1 for MUX1 and any other value is invalid (including -1)
    bool m_MultiplexedLogicalLink1IsEmpty; //!< Normally zero, non-zero means MUX1 contains no data because multiplexing did not occur.
    ETrafficSummaryState m_eTrafficSummaryState;//!< status of traffic summary - present/absent etc..
    bool m_bHasT1Processed;  //!< true if each link/port pair has been trimmed to a duplex conversation by eliminating non-overlapped capture.


    unsigned short m_SummaryFpgaID;     // Summary FPGA ID
    unsigned short m_SummaryBitFileVersion; // Summary Bit file version
    unsigned int m_SummarySoftwareVersion;    // Summary version  /* version of software - if data was generated in software*/

    bool bHasConfig;    // true if there is configure information for this capture.
    EProtocolsAsStringEnums  eProtocolsAsString;  // useful for indexing into the ProtocolsAsStrings array

    UINT ExpertHasExchangeInfo;    // This flag is found in XPT files. If true then there may be events in this XPT that contain exchange info for all events in the exchange on the link
                                       //
    UINT ExpertXPTExchangeInfoVersion;          //<! This tells us the overall QTag version info written by Expert was.
    UINT bThisTrcCanHaveAXPTAssociated;        //<! tells us if this TRC can have an XPT associated with it.

    char DIPMux[20];   //<! contains a string like "21M1" or "13M0" where DIP is 21 or 13 in those examples and MUX is 1 or 0 respectively.
    UINT64 AbsoluteRecordOffset64; //<! normally 0, but if you shave off the 1st part of the capture (by making a partial extraction) then this value keeps track of how many records were shaved offset of the beginning of the capture.
    UINT64 AbsoluteRecordOffsetWhenExpertProcessedTheBuffer64; //<! It's a snapshot of the AbsoluteRecordOffset value at the time when expert processed the buffer.
    UINT64 QTAGRecordOffset64; //<! basically it's AbsoluteRecordOffset - AbsoluteRecordOffsetWhenExpertProcessedTheBuffer
    unsigned short CompiledPMDVersion;//<! version of PMD built into the version of TDIO we're using
    UINT ServerSupportsOverlappedExtractions; //<! Old servers do not know about saving just overlapped data. This flag will be 0 for those old servers, and 1 for the 1st generation of overlapped servers.
    bool bHasdEndingTimeOfLastEvent4ExpertBeenPopulated;  //<! If true then the following member is valid, only populated for expert clients.
    double dEndingTimeOfLastEvent4Expert;      //<! result of EventStruct::GetEOFTimeAsDoubleInMicroSeconds() when called for the last event on this channel
    char guid[256]; //<! capture identifier
    BYTE MaxNumberOfTSM_TriggerStates; //<! Max number of TSM states
    UINT CLKREQ_PERSTinfo; //<! PCIe Only: lets us know if this port was capturing CLKREQ# or PERST# sideband info.
    double EnhancedTriggerInfo_TriggerEventTime; //<! Event's starting time that contains the trigger.

    UINT64 EnhancedTriggerInfo_TriggerRecordNumber64; //!< Record where the trigger occurred
    UINT nUsingMilliRegion; //!< non-zero if this is a trace in milli-region mode

    bool bWereCLKREQSidebandInfoEnabledDuringCapture() const
    {
        // to do: In ReadCaptureInfo() figure out this value and populate it here.
        return false;
    }
    bool bWerePERSTSidebandInfoEnabledDuringCapture() const
    {
        // to do: In ReadCaptureInfo() figure out this value and populate it here.
        return false;
    }

    void bSetSPLCapable(void)
    {
        CLKREQ_PERSTinfo |= HCEF_G24_SPL_CAPTURE_CAPABLE;
    }
    bool bCapableOfSPLData()const
    {
        return  CLKREQ_PERSTinfo&HCEF_G24_SPL_CAPTURE_CAPABLE?true:false;
    }



    bool bSupportOverlappedExtractions()const
    {
        return ServerSupportsOverlappedExtractions != 0;
    }
    bool bDoesCaptureSupportProtocolLayers()const     //<! API for GUI to testing if the capture supports ProtocolLayers.
    {
        if (CompiledPMDVersion==0)
        {
            return false;
        }
        return true;
    }



    double GetStartTimeForExpert(void)const
    {
        if ( ExtractionTimesValid )
        {
            if (dFirstTimeStamp > ExtractionStartTime)
                return dFirstTimeStamp;
            return ExtractionStartTime;
        }
        return dFirstTimeStamp;
    }

    double  GetEndTimeForExpert(void)const
    {
        if (bHasdEndingTimeOfLastEvent4ExpertBeenPopulated)
        {
            // will only take this route if there was an actual event on this channel
            return dEndingTimeOfLastEvent4Expert;
        }
        if (ExtractionTimesValid)
        {
            if (GetStartTimeForExpert() > ExtractionEndTime)
            {
                // case where capture is 9.0 thru 10.0 and user extracted from 1.0 thru 2.0
                // expert doesn't want TDIO to return  2.0, it would prefer (say) 9.0
                return dLastTimeStamp;
            }
            return ExtractionEndTime;
        }
        return dLastTimeStamp;
    }

    bool IsExchangeInfoSupported()const
    {
        if (ExpertHasExchangeInfo)
            return true;
        return false;
    }

    bool bDoesCaptureFormatSupportExchangeView()const
    {
        if (strcmp(Signature,"GTA"))
        {
            return true;
        }
        return false;
    }

    void Dump(string &s)const
    {
        char pszBuf[256];
        s.clear();
        sprintf_s(pszBuf,"eSignature=%d (%s)",eSignature,Signature); s += pszBuf;


        sprintf_s(pszBuf," dTickTime=%f", dTickTime);s += pszBuf;        //!< The time in usec of the system tick
        sprintf_s(pszBuf," dWordTime=%f", dWordTime);s += pszBuf;        //!< The time in usec of the system Tx/Rx Word Time

        sprintf_s(pszBuf,"  bTraceValid  =%s",bTraceValid  ?"true":"false");s += pszBuf;        //!< false = invalid ( not captured yet), true = valid (captured).
        sprintf_s(pszBuf,"  bTriggerValid=%s",bTriggerValid?"true":"false");s += pszBuf;        //!< false = No Trigger, true = Trigger.

        sprintf_s(pszBuf,"  nStartOfTrace=%u\n",nStartOfTrace);s += pszBuf;     //!< Byte Offset From Beginning of File.
        sprintf_s(pszBuf,"  nEndOfTrace=%I64x\n"    ,nEndOfTrace);s += pszBuf;        //!< Byte Offset From Beginning of File.
        sprintf_s(pszBuf,"  nTraceSize=%u\n"     ,nTraceSize);s += pszBuf;            //!< Byte size of the captured data.

        sprintf_s(pszBuf,"  nChannelNumber=%u" ,nChannelNumber);s += pszBuf;        //!< Maximum Number Of Channels. (0 - n)

        s+="sTraceName=";s += sTraceName;s+="\n";        //!< 32 characters with a \0 terminator.
        s+="sTraceDate";s+=sTraceDate;s+="\n";        //!< 10 characters with a \0 terminator.  Date trace started.
        s+="sStartTime";s+=sStartTime;s+="\n";        //!< 10 characters with a \0 terminator.  Time Trace started.
        s+="sStopTime";s+=sStopTime;s+="\n";        //!< 10 characters with a \0 terminator.  Time Trace stopped.
        sprintf_s(pszBuf,"  bUTCTime=%s",bUTCTime?"true":"false");s += pszBuf;  //!< true if the date/time is in UTC format.

        s+=sSystemName;s+="\n";    //!< 16 characters with a \0 terminator.
        s+=sUnitName;s+="\n";        //!< 16 characters with a \0 terminator.
        s+=sBoardName;s+="\n";        //!< 16 characters with a \0 terminator.
        s+=sChannelName;s+="\n";

        s+= sTraceNotes;s+="\n";    //!< 255 characters with a \0 terminator. A place for user notes.
        s+= sTraceAuthor;s+="\n";    //!< 32 characters with a \0 terminator.

        sprintf_s(pszBuf,"  bTraceIsReadOnly  =%s",bTraceIsReadOnly  ?"true":"false");s += pszBuf;

        sprintf_s(pszBuf," _cDIPSwitchValue=0x%X\n",_cDIPSwitchValue);s+=pszBuf;
        sprintf_s(pszBuf," _lIOLayerConf=0x%X\n",_lIOLayerConf);s+=pszBuf;
        sprintf_s(pszBuf," _lHeaderSize=0x%X\n",_lHeaderSize);s+=pszBuf;             //!< the size of the TOTAL header area before the trace data
        sprintf_s(pszBuf," _lDRAMSize=0x%X\n",_lDRAMSize);s+=pszBuf;             //!< the memory trace size (bytes)
        sprintf_s(pszBuf," _lDMABufferSize=0x%X\n",_lDMABufferSize);s+=pszBuf;         //!< the size of the largest DMA buffer possible

        sprintf_s(pszBuf,"BitFileInfo=%d.%d\n",BitFileInfo.Version,BitFileInfo.Revision);

        sprintf_s(pszBuf,"_lCardID=0x%X\n",_lCardID);s+=pszBuf;                //!< the card device ID

        sprintf_s(pszBuf,"_TDIOVersion=0x%X\n", _TDIOVersion);s+=pszBuf;

        s+= "TDIO Version=";s+=sTDIOVersion;s+="\n"; //!< GTX 10.73.21.56 13 april 1956.

        sprintf_s(pszBuf," DomainOrdinalNumber=%d\n",DomainOrdinalNumber);s+=pszBuf; //!< gives the ordinal of the port in the domain. zero based.


        sprintf_s(pszBuf," CaptureWrapStatus=%d\n",CaptureWrapStatus);s+=pszBuf;
        sprintf_s(pszBuf," Link CaptureWrapStatus=%d\n",Link_CaptureWrapStatus);s+=pszBuf;

        //---------------------------------------------------------------------
        // Post Process Information, filled in by Post Processing
        //  Data Processor Code...
        // All Post Process Information is Defaulted to ZERO(0)
        //---------------------------------------------------------------------
        sprintf_s(pszBuf," bPostProcess=%s\n",bPostProcess?"TRUE":"FALSE");s+=pszBuf;        //!< Marked = true if post processing was completed.
        // The following is valid only if PostProcess = 1
        sprintf_s(pszBuf," dFirstTimeStamp=%f\n",dFirstTimeStamp);s+=pszBuf;        //!< The FIRST Timestamp value in this file.
        sprintf_s(pszBuf," dLastTimeStamp=%f\n", dLastTimeStamp);s+=pszBuf;        //!< The LAST  Timestamp value in this file.
        sprintf_s(pszBuf," dEndOfDataTime=%f\n" , dEndOfDataTime);s+=pszBuf;        //!< The time of the last record in this data set


        sprintf_s(pszBuf," ExtractionTimesValid=%s\n",ExtractionTimesValid?"TRUE":"FALSE");s+=pszBuf;  //!< will be true if the following 2 members are valid
        sprintf_s(pszBuf," ExtractionStartTime=%f\n",ExtractionStartTime);s+=pszBuf; //!< will be -1.0 if invalid
        sprintf_s(pszBuf," ExtractionEndTime  =%f\n",ExtractionEndTime  );s+=pszBuf;   //!< will be -1.0 if invalid


        sprintf_s(pszBuf," dTriggerTime  =%f\n",dTriggerTime  );s+=pszBuf;  //!< What time did the trigger occur,
                                                                            //!< only good if TriggerValid == true...

        sprintf_s(pszBuf," bEnhancedTriggerInfo=%s\n",bEnhancedTriggerInfo?"TRUE":"FALSE");s+=pszBuf;  //!< if true then you're in luck we have extra trigger info
        sprintf_s(pszBuf," nVersionMajor=%d\n",nVersionMajor);s+=pszBuf; //!< the build that captured this channel
        sprintf_s(pszBuf," nVersionMinorA=%d\n",nVersionMinorA);s+=pszBuf;//!< the build that captured this channel
        sprintf_s(pszBuf," nVersionMinorB=%d\n",nVersionMinorB);s+=pszBuf;//!< the build that captured this channel
        sprintf_s(pszBuf," nVersionBuildNumber=%d\n",nVersionBuildNumber);s+=pszBuf;//!< the build that captured this channel
        sprintf_s(pszBuf," EnhancedTriggerInfo_TriggerChannelOrdinal=%d\n",EnhancedTriggerInfo_TriggerChannelOrdinal);s+=pszBuf ; //!< this is the channel that triggered. This can be compared with the DomainOrdinalNumber to see if this was the trigger channel.
        sprintf_s(pszBuf," EnhancedTriggerInfo_TriggerTime=%f\n",EnhancedTriggerInfo_TriggerTime);s+=pszBuf ; //!< actual trigger time
        sprintf_s(pszBuf,"  EnhancedTriggerInfo_TriggerTimeIn10PicoSecondsLegacy=%I64d",EnhancedTriggerInfo_TriggerTimeIn10PicoSecondsLegacy);s += pszBuf ; //!< Trigger Time - same as above - but different units
        sprintf_s(pszBuf,"  EnhancedTriggerInfo_TriggerRecordNumber=%I64u" ,EnhancedTriggerInfo_TriggerRecordNumber64);s += pszBuf ; //!< Record where the trigger occurred
        sprintf_s(pszBuf,"  EnhancedTriggerInfo_TriggerRecordOffset=%u" ,EnhancedTriggerInfo_TriggerRecordOffset);s += pszBuf ; //!< will be zero
    //    double TriggeEventTime;
        s +=EnhancedTriggerInfo_TriggerChannelName;s+="\n"; //!< name of the port that triggered.
        sprintf_s(pszBuf,"  EnhancedTriggerInfo_TriggerFlavor=%u" ,EnhancedTriggerInfo_TriggerFlavor);s += pszBuf ;  //!< type of trigger. Bit field. look at the enums CHANNEL_TRIGGERED_FROM_INTERNAL, CHASSIS_TRIGGERED_FROM_TTL_IN etc.. Tells you how the triggering channel actually triggered.


        sprintf_s(pszBuf,"  NumBitsOnTheWire=%u" ,NumBitsOnTheWire);s += pszBuf ;        //!< 40 for 2G FC,  66 for 10G FC
        sprintf_s(pszBuf,"  NumBitsReceivedData=%u" ,NumBitsReceivedData);s += pszBuf ;   //!< 32 for 2G FC, 64 for 10G FC
        sprintf_s(pszBuf,"  GigabitsPerSecond=%f" ,GigabitsPerSecond);s += pszBuf ;    //!< 1.0625 for 1G FC, 1.25 for GE
        s+=BitRateAsString;s+="\n";   //!<  "1.25 Gbps" for GE
        s+=ProtocolAsString;s+="\n";   //!<  "Fibre Channel", "Ethernet"
        sprintf_s(pszBuf,"  WideLinkID=%u" ,(int)WideLinkID);s += pszBuf ;             //!< lets you figure out if this channel is part of a wide link - and if so which wide link it's a member of.
        sprintf_s(pszBuf,"  NumChannelsInThisWideLink=%u" ,(int)NumChannelsInThisWideLink);s += pszBuf ; //!< lets you know how many channels are in the wide link.
        s+=WideLinkName;s+="\n";//!< empty if WideLinkID = 0
        sprintf_s(pszBuf," bSupportsDWORDView=%s\n",bSupportsDWORDView?"TRUE":"FALSE");s+=pszBuf ; //!< true if this channel is DWORD view capable.
        sprintf_s(pszBuf," OOB2Supported=%s\n",OOB2Supported?"TRUE":"FALSE");s+=pszBuf ; //!< true if OOB2 EventStructs are available.

        sprintf_s(pszBuf,"  nCDRLossLockCount=%u" ,nCDRLossLockCount);s += pszBuf ;  //!< CDR Loss Lock Count for 8G FC blade
        sprintf_s(pszBuf," Blade=%d\n",Blade);s+=pszBuf ;           //!< one based
        sprintf_s(pszBuf," Port=%d\n",Port);s+=pszBuf ;             //!< one based
        sprintf_s(pszBuf," ChassisOrdinal=%d\n",ChassisOrdinal);s+=pszBuf ;     //!< one based
        sprintf_s(pszBuf,"  Segment=%u" ,(int)Segment);s += pszBuf ;           //!< Segment of this capture
        sprintf_s(pszBuf,"  TotalSegments=%u" ,(int)TotalSegments);s += pszBuf ;        //!< Total number of segments reserved in buffer memory
        sprintf_s(pszBuf,"  TriggerHint=%u" ,TriggerHint);s += pszBuf ;  //!< Lets you know if the event's start time is ahead or behind the actual trigger time. (e.g. suppose trigger was on frame CRC then frame start time would be before the trigger time)
        sprintf_s(pszBuf,"  OOBCaptureMode=%u" ,OOBCaptureMode);s += pszBuf ;  //!< used for GUI OOB graph decision
        sprintf_s(pszBuf," m_MultiplexingEnabled=%s\n",m_MultiplexingEnabled?"TRUE":"FALSE");s+=pszBuf ; //!< Will be zero if multiplexing is not available
        sprintf_s(pszBuf," m_MultiplexedChannel=%d\n",m_MultiplexedChannel);s+=pszBuf ; //!< values: 0 for MUX0, 1 for MUX1 and any other value is invalid (including -1)
        sprintf_s(pszBuf," m_MultiplexedLogicalLink1IsEmpty=%s\n",m_MultiplexedLogicalLink1IsEmpty?"TRUE":"FALSE");s+=pszBuf ; //!< Normally zero, non-zero means MUX1 contains no data because multiplexing did not occur.
        sprintf_s(pszBuf, " m_eTrafficSummaryState=%d\n", m_eTrafficSummaryState); s += pszBuf; // See defination of ETrafficSummaryState
        sprintf_s(pszBuf, " m_bHasT1Processed=%s\n", m_bHasT1Processed ? "TRUE" : "FALSE"); s += pszBuf; // Contains valid traffic summary data if none zero
        sprintf_s(pszBuf, " bHasConfig=%s\n", bHasConfig ? "TRUE" : "FALSE"); s += pszBuf; // Has config from TC embedded in header.
    }

};


#define BOOKMARK_VERSION        2



#define BM_LCOMMENT  (&Data[BM_LegacyCommentOffset])     // pointer to Legacy comment
#define BM_COMMENT  (&Data[BM_CommentOffset])            // pointer to New! comment

struct TRACE_BOOKMARK
{

    static const int BM_LegacyNameLength=32;
    static const int BM_LegacyCommentOffset=BM_LegacyNameLength;
    static const int BM_LegacyCommentLength=256;
    static const int BM_NameLength=81;
    static const int BM_CommentOffset=BM_NameLength;
    static const int BM_Cookie_length=2;
    static const int BM_DWIOffset_length=1;
    
    static const unsigned short BM_Cookie_value=0x9900;
    static const int BM_CommentLength=BM_LegacyNameLength+BM_LegacyCommentLength-BM_NameLength - (BM_Cookie_length+BM_DWIOffset_length);


    static const unsigned int e80_208format=0x8208;

    typedef enum ETypeOfBookMark
    {
        BOOKMARK_INVALID=0,
        BOOKMARK_SEARCH=1,                               //!< LEGACY: not used
        BOOKMARK_USER=2,                                 //!< This is sort of bookmark that shows up in TraceView
        BOOKMARK_ERROR=3,                                //!< LEGACY: not used
        BOOKMARK_TIMESTAMP_ONLY=4,                       //!< LEGACY: not used
        BOOKMARK_EXPERT_DECODE_HINT=5,                   //!< LEGACY: old style decode hint
        BOOKMARK_USER_DECODE_HINT=6,                     //!< LEGACY: old style decode hint
        BOOKMARK_DWORD_VIEW=0x80000000|BOOKMARK_USER,    //!< This is a DWORD view bookmark.
        BOOKMARK_ABSORB=0x40000000|BOOKMARK_USER,    //!< This is an absorbed bookmark.
        BOOKMARK_LAST=8
    };


    typedef enum ESetNameReturnTypes
    {
        Succeeded=0,                      //!< setting the bookmark name succeeded
        NameTooLong,                    //!< setting the name failed because the name was too long
        CommentNeedsTruncating          //!< setting the name requires we upgrade the bookmark to the New! 80:207 bookmarks
    };





    int        nVersion;        //!< Version of structure
//    char    cName[32];          //!< Name of bookmark
//    char    cComment[256];      //!< Annotation associated with bookmark
private:
    char Data[BM_LegacyNameLength+BM_LegacyCommentLength-3]; //!< Private bookmark data, contains either 32:256 name:comment or 80:208 name:comment
    unsigned short Cookie;
    unsigned char DWIOffset;
public:

    double    dTimeStamp;       //!< TimeStamp
    UINT    uiChannelNumber;    //!< The Channel/File Number
private:
    // made this member private to force consumers to use the Set/Get APIs for record numbers, because our record numbers now
    // are 46 bits instead of 32 bits. And for binary compatibility (with older servers etc..) we left the bottom 32bits where they were.
    // This was required to support captures greater than 32GBytes
    UINT    uiRecordNoLow32;         //!< Record number association. (records are 8 bytes).
public:
    UINT    uiByteOffset:2;       //!< Byte offset into the Record
    UINT    uiRecordNoHigh14:14;
    UINT    ui80_208Format:16;   //!< Will be 0x8208 if this bookmark is a new 80:208 style bookmark

    ETypeOfBookMark GetType()const
    {
        return eType;
    }

    ETypeOfBookMark GetTypeFull()const
    {
        return eTypeFull;
    }

    void SetType(ETypeOfBookMark type)
    {
        eType = type;
    }

    void SetTypeFull(ETypeOfBookMark type)
    {
        eTypeFull = type;
    }

    void SetBookmark(const EventStruct *pEvent,  const string &Name="",  const string &Comment="")
    {
        Reset();
        SetCRecord(pEvent->GetCRecord());
        SetTimestamp(pEvent->GetTimeStamp());
        SetChannelNumber(pEvent->GetChannel());
        if (pEvent->GetCRecord().bGetPostAlign())
            SetAbsorbed();
        SetName(Name);
        SetComment(Comment);
    }

    void SetChannelNumber(unsigned int ChannelNumber)
    {
        uiChannelNumber = ChannelNumber;
    }
    unsigned int GetChannel(void)const
    {
        return uiChannelNumber;
    }
    void SetTimestamp(double time)
    {
         dTimeStamp = time;
    }
    void SetAbsorbed()
    {
        eTypeFull = (ETypeOfBookMark)((UINT)eTypeFull | (UINT)BOOKMARK_ABSORB);
    }


    union
    {
        ETypeOfBookMark eType:30;    //!< Type of bookmark (SEARCH, USER, ERROR, etc.)
        ETypeOfBookMark eTypeFull;   //!< This allows us to peek at the MSB - which is the DWORD flag. and the absorb flag
    };



    void InitNameComment()
    {
        memset(Data,0,sizeof(Data));
        Cookie = 0;
        DWIOffset = 0;
    }


private:
    //TRACE_BOOKMARK(void)
    //{
    //    _ASSERTE(FALSE==(void*)"Don't use this constructor");
    //}
public:

    static bool IsBookmarked( TRACE_BOOKMARK &bm, EventStruct *pEvent)
    {
        return bm.IsBookmarked(pEvent);
    }
    bool IsBookmarked( EventStruct *pEvent)const
    {
        if (GetCRecord() == pEvent->GetCRecord())
        {
            if (GetChannel() == pEvent->GetUChannel())
            {
                return true;
            }
        }
        return false;
    }








    unsigned __int64 GetRecordNumber()const
    {
        unsigned __int64 val =   ((unsigned __int64)uiRecordNoHigh14)<<32 | uiRecordNoLow32;
        return val;
    }
    BYTE GetRecordOffset()const
    {
        if (Cookie==BM_Cookie_value)
        {
            return  DWIOffset;
        }
        return uiByteOffset;
    }

    void SetRecordNumberAndOffset( unsigned __int64 RecNum, unsigned char offset)
    {
        SetRecordNumber(RecNum);
        SetRecordOffset(offset);
    }
    void SetRecordNumber( unsigned __int64 RecNum)
    {
        _ASSERTE( (RecNum>>46) == 0);  // record numbers are limited to 46 bits at the mo.
        uiRecordNoHigh14 = RecNum>>32;
        uiRecordNoLow32 = RecNum&(~0);
    }
    void SetRecordOffset( unsigned char offset)
    {
        uiByteOffset = offset&3;
        if (offset > 3)
        {
            _ASSERTE(offset < 0xFF);
            DWIOffset = offset;
            Cookie = BM_Cookie_value; 
        }
    }
    void SetCRecord( const CRecord &cRecord)
    {
        SetRecordNumberAndOffset(cRecord.GetRecordNumber(), cRecord.GetRecordOffset());
        if (cRecord.bGetPostAlign())
        {
            SetAbsorbed();
        }
    }
    CRecord GetCRecord()const
    {
        CRecord cr(GetRecordNumber(),GetRecordOffset());
        if ((GetTypeFull() & BOOKMARK_ABSORB) == BOOKMARK_ABSORB)
            cr.SetPostAlign(1);
        return cr;
    }


    void Reset()
    {
        nVersion = BOOKMARK_VERSION;
        eTypeFull = BOOKMARK_USER;

        InitNameComment();
        ui80_208Format = e80_208format;  // all new bookmarks will be assume the new 80:208 format
        uiRecordNoHigh14 = 0; // old bookmarks had an issue that these bits were non-zero, but we now guarantee New! bookmarks have zeros here when they are updgraded from old legacy bookmarks.
        dTimeStamp = 0.0;
        uiChannelNumber = UINT_MAX;
        Cookie = 0;
        DWIOffset = 0;
#ifdef _DEBUG
        size_t mysize = sizeof(*this);
        size_t mytest = 316;
        _ASSERTE(mytest==mysize);    // just checking that bookmarks have not changed size, if they change size then we'll have a compatibility issue.
#endif //_DEBUG

    }

    // use a constructor to ensure version is set correctly.
    TRACE_BOOKMARK(ETypeOfBookMark eBookmarkType=BOOKMARK_USER)
    {
        Reset();
        eTypeFull = eBookmarkType;
    }


    bool bIsDWORDBookmark()const
    {
        if (eTypeFull == BOOKMARK_DWORD_VIEW)
            return true;

        return false;
    }

    //Rammohan Kotturu
    //assignment operator
    TRACE_BOOKMARK& operator =(const TRACE_BOOKMARK& obj)
    {
        // Andy: If you're using memcpy for one of the data members we might as well use it for all.
        memcpy(this,&obj,sizeof(obj));
        return *this;
    }
    TRACE_BOOKMARK( const TRACE_BOOKMARK &obj)
    {
        *this = obj;
    }

    bool bIsLegacyBookmark()const
    {
        return !bIs80_208Bookmark();
    }
    bool bIs80_208Bookmark()const
    {
        return (e80_208format == ui80_208Format);
    }

    void Upgrade()
    {
        if (!bIsLegacyBookmark())
            return;
        char tmp[BM_LegacyCommentLength];
        strcpy_s(tmp,BM_LCOMMENT); // save old comment
        memset(BM_LCOMMENT,0,BM_LegacyCommentLength);  // zero out old comment
        ui80_208Format=e80_208format; // upgrade to new format
        uiRecordNoHigh14 = 0; // old bookmarks had an issue that these bits were non-zero, but we now guarantee New! bookmarks have zeros here when they are updgraded from old legacy bookmarks.
        tmp[BM_CommentLength-1]=0; // need to truncate old comment
        SetComment(tmp);  // restore the (possibly truncated comment)
    }

    void Invalidate()
    {
        eTypeFull=BOOKMARK_INVALID;
        InitNameComment();
        dTimeStamp=0.0;
    }

    ESetNameReturnTypes SetName(const string &name, bool bForce=false)  // pass true to auto truncate/upgrade
    {
        return SetName(name.c_str(), bForce);

    }
    ESetNameReturnTypes SetName(const char *name, bool bForce=false)  // pass true to auto truncate/upgrade
    {
        size_t sln = strlen(name);
        if (bIsLegacyBookmark() && sln >= BM_LegacyNameLength)
        {
            if (Comment().length() < BM_CommentLength)
            {
                bForce = true;
            }
            if (!bForce)
            {
                _ASSERTE(NULL==(void*)"Oppotunity for bookmark upgrade");
                return CommentNeedsTruncating;
            }
            // we're going to force it, so upgrade the bookmark.
            Upgrade();
        }
        size_t NumBytesToCopy=BM_NameLength;
        if (bIsLegacyBookmark())
        {
            NumBytesToCopy = BM_LegacyNameLength;
        }
        memset(Data,0,NumBytesToCopy);

        if (sln >= NumBytesToCopy )
            NumBytesToCopy -=1;
        else if (sln < NumBytesToCopy)
            NumBytesToCopy = sln;
        memcpy(Data,name,NumBytesToCopy); // copy
        return Succeeded;
    }

    void SetComment(const string &comment)
    {
        SetComment(comment.c_str());
    }
    void SetComment(const char*comment)
    {
        if (bIsLegacyBookmark())
        {
            _ASSERTE(strlen(comment) < BM_LegacyCommentLength);  // comment will be truncated if this assert triggers
            SetString(BM_LCOMMENT,BM_LegacyCommentLength,comment);
        }
        else
        {
            _ASSERTE(strlen(comment) < BM_CommentLength);  // comment will be truncated if this assert triggers
            SetString(BM_COMMENT,BM_CommentLength,comment);
        }
    }


    bool bHasNameOrComment()const
    {
        if (Name().length())
        {
            return true;
        }
        if (Comment().length())
        {
            return true;
        }
        return false;
    }

    bool bIsEmpty() const
    {
        if (dTimeStamp == 0.0 && !bHasNameOrComment())
            return true;
        return false;
    }
    std::string Name() const
    {
        return Data;
    }
    std::string Comment() const
    {
        if (bIsLegacyBookmark())
        {
            return BM_LCOMMENT;
        }
        return BM_COMMENT;
    }


public:
    bool static SortByTimestamp(const TRACE_BOOKMARK& obj1, const TRACE_BOOKMARK& obj2)
    {
        return obj1.dTimeStamp < obj2.dTimeStamp;
    }

private:
    void SetString(char *dest, size_t ByteCountAllocatedAt_dest, const char *str)
    {
        size_t slc = strlen(str);
        memset(dest,0,ByteCountAllocatedAt_dest);  // zero out the dest, guarantees dest will be nul terminated.
        if (slc >= ByteCountAllocatedAt_dest)
            slc = ByteCountAllocatedAt_dest-1;
        memcpy(dest,str,slc); // copy string - up to but not including the nul, guarantees dest will be nul terminated.
    }

TRACE_BOOKMARK( const TRACE_BOOKMARK *); /* Stubbed the copy constructor */
/* Stubbed the copy constructor */
//T &operator=( const T &); /* Stubbed the assignment operator */
TRACE_BOOKMARK &operator=( const TRACE_BOOKMARK *); /* Stubbed the assignment operator */

};



#pragma pack(pop )



#endif //_XGIG_H_INCLUDED_
